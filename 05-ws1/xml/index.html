<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
    <link rel="stylesheet" type="text/css" href="../../_css/labs-sd.css">

    <link href="../../_prettify/prettify.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="../../_prettify/prettify.js"></script>

    <title>XML</title>
</head>

<body onload="prettyPrint()">

<div class="contexto">
    <p>
        <a href="../../index.html">Labs SD</a> &gt;
        <a href="../index.html">Web Services</a>
    </p>
</div>


        <div class="titulo">
            <h1>XML</h1>
        </div>

        <div class="indice">
        	<ul>
                <li><a href="#definicao">Definição</a></li>
                <li><a href="#documentosBemFormados">Documentos bem-formados</a></li>
                <li><a href="#representacaoDados">Representação de dados</a></li>
                <li><a href="#espacosNomes">Espaços de nomes</a></li>
            </ul>
        </div>

        <hr />

        <div class="corpo">
            <h2 id="xml">XML</h2>
            <h3 id="definicao">Definição</h3>
            <p>
A eXtensible Markup Language (XML) (em tradução livre: linguagem de etiquetas extensível)
é um formato de representação de dados em texto.
            </p>
            <p>
As partes do texto são etiquetadas para lhes atribuir significado específico.
            </p>
            <p>
As etiquetas (tags) são representadas da seguinte forma:
            </p>
            <ul>
                <li>Abertura: &lt;elem&gt;</li>
                <li>Fecho: &lt;/elem&gt;</li>
                <li>Abertura e fecho imediato: &lt;elem /&gt;</li>
                <li>Atributo: &lt;elem atrib="value" /&gt;</li>
            </ul>
<pre class="prettyprint lang-xml">&lt;mensagem xmlns="urn:empresa.pt:mensagem" id="74536"&gt;
    &lt;!-- isto é um comentário --&gt;
    &lt;de&gt;João&lt;/de&gt;
    &lt;para&gt;Carla&lt;/para&gt;
    &lt;assunto&gt;Reunião&lt;/assunto&gt;
    &lt;texto&gt;Confirmo a reunião dia 6&lt;/texto&gt;
&lt;/mensagem&gt;</pre>
            <p>
Para além destes exemplos, as principais utilizações actuais da XML são:
            </p>
            <ul>
                <li>Troca de dados entre aplicações: alternativa a formatos proprietários</li>
                <li>Transacções Business-to-Business</li>
                <li>Ficheiros de configuração de aplicações informáticas</li>
            </ul>

            <p>&nbsp;</p>
            <h3 id="documentosBemFormados">Documentos bem-formados</h3>
            <p>
Um documento XML diz-se bem-formado quando respeita as seguintes regras:
            </p>
            <ul>
                <li>Existe um elemento raiz único</li>
                <li>Todos os elementos têm que ser fechados</li>
                <li>Os elementos fecham pela ordem inversa em que abrem, i.e., têm de estar encadeados</li>
                <li>Os elementos têm de começar por uma letra ou 'underscore' (_)</li> <!-- w3schools diz que so nao podem comecar por numeros ponto, e sequencia "xml", -->
                <li>Os nomes são 'case sensitive'</li>
                <li>Os atributos estão envoltos em aspas</li>
            </ul>
            <p>
O significado atribuído pelas etiquetas é livre, o que torna a linguagem extensível.
            </p>

            <p>&nbsp;</p>
            <h3 id="representacaoDados">Representação de dados</h3>
            <p>
A linguagem XML pode ser utilizada para representar diferentes tipos de dados. Os dados podem ser simples ou compostos.
            </p>
            <p>
Os dados simples representam valores que podem ter vários tipos, incluindo texto, numéricos e datas.<br />
Os dados compostos resultam da combinação de vários dados simples. São normalmente estruturas de dados
(registos com vários campos) ou vectores (vários valores semelhantes indexados), em que cada elemento é um dado simples.
            </p>
		    <p>
Por exemplo, para representar o nome de uma pessoa em XML, as seguintes alternativas são válidas:
            </p>
<pre class="prettyprint lang-xml">&lt;nome&gt;Pedro Miguel Silva&lt;/nome&gt;</pre>
            <p>ou</p>
<pre class="prettyprint lang-xml">&lt;nome&gt;
	&lt;primeiro&gt;Pedro&lt;/primeiro&gt;
	&lt;meio&gt;Miguel&lt;/meio&gt;
	&lt;apelido&gt;Silva&lt;/apelido&gt;
&lt;/nome&gt;
</pre>
            <p>
Na primeira, o nome foi considerado um dado simples.
Na segunda, foi considerado um dado composto, que se dividiu em três partes.
Qual a melhor opção? Depende do fim a que se destinam os dados.
    		</p>
            <p>&nbsp;</p>
            <h3 id="espacosNomes">Espaços de nomes</h3>
            <p>
Os espaços de nomes XML (namespaces) são uma forma de qualificar os nomes das etiquetas, para evitar
conflitos de nomes.
            </p>
            <p>
Por exemplo, o nome de etiqueta 'mensagem' é um nome bastante comum.
Tanto pode aparecer nos formatos XML de uma aplicação de uma empresa,
em que tem uma dada estrutura:
<pre class="prettyprint lang-xml">&lt;mensagem xmlns="urn:empresa.pt:mensagem" id="49532"&gt;
    &lt;de&gt;Manuel&lt;/de&gt;
    &lt;para&gt;Francisco&lt;/para&gt;
    &lt;assunto&gt;Almoço&lt;/assunto&gt;
    &lt;texto&gt;Que tal um almoço na sexta?&lt;/texto&gt;
&lt;/mensagem&gt;</pre>
            <p>
Como nos formatos XML de outra aplicação de outra empresa, em que pode ter outra estrutura:
            </p>
<pre class="prettyprint lang-xml">&lt;mensagem xmlns="urn:outraempresa.pt:sisenc"&gt;
    &lt;prioridade&gt;Urgente&lt;/prioridade&gt;
    &lt;remetente&gt;Loja&lt;/remetente&gt;
    &lt;destinatario&gt;Armazém&lt;/destinatario&gt;
    &lt;conteudo&gt;
        &lt;encomenda nr="20031"&gt;
            &lt;produto numSerie="282830031" /&gt;
            &lt;produto numSerie="243497333" /&gt;
        &lt;/encomenda&gt;
    &lt;/conteudo&gt;
&lt;/mensagem&gt;</pre>
            <p>
Neste exemplo, não só a estrutura que é diferente, mas também o próprio significado das etiquetas.
            </p>
            <p>
Para evitar confusões no tratamento automático de dados, é necessário qualificar os nomes das
etiquetas com um espaço de nomes. A forma de o fazer é através do atributo xmlns, como é
mostrado nos exemplos anteriores.
            </p>
            <p>
Caso existam vários espaços de nomes em utilização no mesmo documento,
cada xmlns deve definir um prefixo, como xmlns:en1="urn:empresa.pt:mensagem" e
xmlns:en2="urn:outraempresa.pt:sisenc":
            </p>
<pre class="prettyprint lang-xml">&lt;mensagensJuntas xmlns:en1="urn:empresa.pt:mensagem"
                 xmlns:en2="urn:outraempresa.pt:sisenc"&gt;

    &lt;en1:mensagem en1:id="49532"&gt;
        &lt;en1:de&gt;Manuel&lt;/en1:de&gt;
        &lt;en1:para&gt;Francisco&lt;/en1:para&gt;
        &lt;en1:assunto&gt;Almoço&lt;/en1:assunto&gt;
        &lt;en1:texto&gt;Que tal um almoço na sexta?&lt;/en1:texto&gt;
    &lt;/en1:mensagem&gt;

    &lt;en2:mensagem&gt;
        &lt;en2:prioridade&gt;Urgente&lt;/en2:prioridade&gt;
        &lt;en2:remetente&gt;Loja&lt;/en2:remetente&gt;
        &lt;en2:destinatario&gt;Armazém&lt;/en2:destinatario&gt;
        &lt;en2:conteudo&gt;
            &lt;en2:encomenda en2:nr="20031"&gt;
                &lt;en2:produto en2:numSerie="282830031" /&gt;
                &lt;en2:produto en2:numSerie="243497333" /&gt;
            &lt;/en2:encomenda&gt;
        &lt;/en2:conteudo&gt;
    &lt;/en2:mensagem&gt;

&lt;/mensagensJuntas&gt;</pre>
            <p>
en1:mensagem é uma abreviatura de {urn:empresa.pt:mensagem}mensagem.<br />
en2:mensagem(que é uma abreviatura de {urn:outraempresa.pt:sisenc}mensagem.
            </p>
            <p>
Sendo assim, não há confusão. Uma aplicação usa o
elemento en1:mensagem que tem uma definição
e a outra aplicação usa o elemento en2:mensagem que tem outra definição.
            </p>
            <p>
O espaço de nomes é uma cadeia de caracteres que deve ser única.
Por este motivo, tipicamente são utilizados endereços Internet (URLs),
como "http://www.ist.utl.pt/" que são pertença de uma dada entidade
(neste exemplo, o endereço é pertença do IST, da UTL, de Portugal).
            </p>
            <p>
A utilização de uma cadeia de caracteres como "http://www.ist.utl.pt/"
serve apenas para garantir que é uma cadeia de caracteres única no mundo,
<b>não serve para obter nenhum documento pela rede</b>.
Este aspecto causa por vezes alguma confusão, que é compreensível.
            </p>
        </div>


        <hr />

<div class="rodape">
<p>
&copy; Docentes de Sistemas Distribuídos,
<a href="http://www.dei.tecnico.ulisboa.pt/">Dep. Eng. Informática</a>,
<a href="http://www.ist.eu">Técnico Lisboa</a><br />
</p>
</div>

	</body>
</html>
