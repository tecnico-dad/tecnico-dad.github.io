<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
    <link rel="stylesheet" type="text/css" href="../_css/labs-sd.css">

    <link href="../_prettify/prettify.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="../_prettify/prettify.js"></script>

    <title>Ferramentas de desenvolvimento e comunicação</title>
</head>

<body onload="prettyPrint()">

<div class="contexto">
    <p>
        <a href="../index.html">Labs SD</a> &gt;
    </p>
</div><!-- contexto -->

<div class="titulo" id="1">
    <h1>Ferramentas de desenvolvimento e comunicação</h1>
</div><!-- titulo -->

<div class="objectivos">
    <h2>Objetivos da semana</h2>
    <ul>
        <li>Familiarizar-se com o Moodle da nossa disciplina</li>
        <li>Inscrever o grupo de trabalho</li>

        <li>Usar o Maven para compilar projectos Java</li>
        <li>Resolver exercício com <i>sockets</i> para transferir dados entre um programa cliente e um programa servidor</li>
    </ul>
</div><!-- objectivos-->

<div class="indice">
    <h2>Índice:</h2>
    <ul>
        <li><a href="#apoio">Apoio</a></li>
        <li><a href="#inscricao">Inscrição de grupo</a></li>
        <li><a href="#java">Java</a></li>
        <li><a href="#maven">Maven</a></li>
        <li><a href="#IDE">Java IDE</a></li>
        <li><a href="#sockets"><i>Sockets</i></a></li>
    </ul>
</div><!-- indice -->


<div class="corpo">

    <p>&nbsp;</p>
    <h2 id="apoio">Apoio</h2>
    <p>
        O professor do laboratório vai acompanhar o vosso percurso ao longo de todo o semestre. 
        É importante ficar a conhecê-lo desde já. :)
    </p>
    <p>
        O apoio a dúvidas fora das aulas é feito através do Moodle de SD, onde é possível colocar perguntas e receber respostas, quer de colegas, quer dos professores.
        Se não conseguir aceder ao Moodle, peça ajuda ao docente laboratorial.
    </p>
    
    <p>&nbsp;</p>
    <h2 id="inscricao">Inscrição de grupo</h2>
    <p>
        O trabalho de laboratório e no projeto é realizado em grupo, com 3 elementos.
        Os grupos terão de ser formados entre estudantes inscritos no mesmo turno de laboratório.<br />
    </p>
    <p>
        <i>Para fazer:</i>
        <ul>
            <li>
                Para registar o grupo, indicar na aula, a pedido do professor, os números de aluno IST e os nomes de utilizadores GitHub de todos os membros
            </li>
            <ul>
                <li>
                    Caso ainda não tenha uma conta GitHub, deve <a href="https://github.com/join">criar uma</a>
                </li>
                <li>
                    Atualize a sua foto na conta de perfil, para que possa ser reconhecido
                </li>
                <li>
                    Aproveite e atualize também a foto do Fénix
                </li>
            </ul>
        </ul>
    </p>
    <p>
        <i>Caso ainda não tenha grupo completo:</i>
        <ul>
            <li>
                Compareça no seu turno de laboratório e fale com colegas na mesma situação. 
                Esta é a forma mais eficaz de formar grupo!
            </li>
            <li>
                Procure colegas no fórum no Moodle, onde os docentes criarão um tópico de discussão sobre este tema. 
                Deixe lá a indicação de que procura elemento(s) para formar grupo ou respondendo a mensagens lá publicadas por colegas. 
                Indique sempre o(s) turno(s) que pode frequentar e onde ainda há vagas. 
            </li>
            <li>
                Note bem: a formação do grupo é da responsabilidade dos estudantes; os professores apenas fazem o registo.
            </li>
        </ul>
    </p>

<p>&nbsp;</p>
<p>
As ferramentas para o desenvolvimento do projeto são: Java (linguagem e plataforma), Maven (construção), e um Java IDE (ambiente integrado de desenvolvimento).
</p>
<p>
Esta página contém textos introdutórios a cada uma das ferramentas e um exercício.
</p>

<p>
Em primeiro lugar, antes de começar, é necessário ter o <a href="../software/index.html"><i>software</i> instalado</a>.
</p>

<p>&nbsp;</p>
<hr />
<h2 id="java">Java</h2>

<p>
O JDK (<i>Java Developer Kit</i>) é um conjunto de ferramentas para programação na linguagem Java.<br />
As mais importantes são o <tt>javac</tt> que compila os programas e o <tt>java</tt> que lança as aplicações.
</p>
<p>
Os <tt>javac</tt> e <tt>java</tt> são suficientes para construir pequenos programas. No entanto, para programas de maior dimensão, é muito útil ter:
</p>
<ul>
    <li>
    Uma ferramenta que dê suporte a todas as tarefas de forma integrada,
    incluíndo a gestão de dependências: <b>Maven</b>.
    </li>
    <li>
    Um ambiente que apoie o programador em todas as tarefas: <b>IntelliJ</b>, <b>Eclipse</b>, ou equivalente.
    </li>
    <li>
    Bibliotecas para sistematizar os testes: <b>JUnit</b>.
    </li>
</ul>
<p>
A tabela seguinte resume as utilizações mais comuns do JDK, Maven, e Eclipse:
</p>
<ul>
    <li>
    <a href="java-tools-ref-card.pdf"><i>Java tools reference card</i></a>
    <img src="../_img/pdf.png" alt="PDF" >
    </li>
</ul>

<p>
A programação em Java para Sistemas Distribuídos deve ter em conta a <a href="java-synch/index.html">concorrência e sincronização</a>, uma vez que os servidores costumam tratar pedidos de vários clientes em simultâneo.
</p>
<p>
O <a href="exceptions/index.html">tratamento de exceções</a> é também um aspeto muito importante, e que irá ser especialmente importante para lidar com problemas de comunicação.
</p>


<p>&nbsp;</p>
<hr />
<h2 id="maven">Maven</h2>
<p>
A ferramenta Maven é a mais importante logo a seguir ao próprio JDK.
A utilização do Maven é obrigatória em SD para permitir a construção dos projetos de forma automática na linha de comandos.
</p>
<p>
O Maven desempenha o papel muito importante de automatizar toda a construção do código e de explicitar dependências de outros programas.
Todos os programas devem ter a configuração Maven no ficheiro <b><tt>pom.xml</tt></b> para que possam ser (re)construídos de forma repetível.
Os programas devem ter também um ficheiro <tt>README</tt> com instruções de construção e de execução.
</p>

<ul>
    <li><a href="maven/index.html">Introdução ao Maven</a></li>
</ul>
<ul>
    <li><a href="https://github.com/tecnico-distsys/example_java-app" target="_blank">Exemplo de aplicação Java <img src="../_img/github.png" alt="GitHub" height="16"></a></li>
    <ul>
        <li>O exemplo utiliza o Maven para compilar e executar o código Java</li>
        <li>Para experimentar o código: fazer <b><i>Clone or Download</b></i> e depois seguir as instruções do <b><tt>README</tt></b></li>
        <li>O comando <tt>mvn compile exec:java</tt> compila o programa e executa a classe principal indicada no <tt>pom.xml</tt></li>
        <li>O exemplo tem variantes que podem ser consultadas noutros ramos (<i>branches</i>) do Git</li>
        <ul>
            <li><tt>appassembler</tt> - permite gerar <i>scripts</i> de lançamento da aplicação em <i>Linux</i> e <i>Windows</i><br />
            <a href="https://github.com/tecnico-distsys/example_java-app/tree/appassembler" target="_blank">Ver código alternativo</a> e <a href="https://github.com/tecnico-distsys/example_java-app/compare/master...appassembler" target="_blank">comparar com exemplo base</a></li>
            <li><tt>config</tt> - utiliza ficheiro com propriedades de configuração, algumas delas preenchidas dinamicamente pelo Maven<br />
                <a href="https://github.com/tecnico-distsys/example_java-app/tree/config" target="_blank">Ver código alternativo</a> e <a href="https://github.com/tecnico-distsys/example_java-app/compare/master...config" target="_blank">comparar com exemplo base</a></li>
            </ul>
    </ul>
</ul>
<ul>
    <li><a href="https://github.com/tecnico-distsys/example_java-lib" target="_blank">Exemplo de biblioteca Java <img src="../_img/github.png" alt="GitHub" height="16"></a></li>
    <ul>
        <li>Permite agrupar um conjunto de classes comuns, que podem depois ser reutilizadas por outros programas</li>
        <li>Para experimentar o código: fazer <b><i>Clone or Download</b></i> e depois seguir as instruções do <b><tt>README</tt></b></li>
        <li>O comando <tt>mvn install</tt> disponibiliza o módulo no repositório local</li>
        <li>O módulo instalado pode depois ser usado como dependência (<i>dependency</i>) através das coordenadas:<br />
        (<i>groupId</i>, <i>artifactId</i>, e <i>version</i>).</li>
    </ul>
</ul>


<p>&nbsp;</p>
<hr />
<h2 id="IDE">Java IDE</h2>
<p>
Tanto o Eclipse quanto o IntelliJ podem ser configurados em cima do JDK ou do Maven.<br />
</p>
<ul>
    <li><a href="https://www.jetbrains.com/help/idea/maven-support.html">Maven no IntelliJ</a></li>
</ul>
<ul>
    <li><a href="eclipse/maven/index.html">Maven no Eclipse</a></li>
    <li><a href="http://www.slideshare.net/MiguelLPardal/eclipse-workshop-presentation" target="_blank">Dicas de utilização do Eclipse</a></li>
</ul>
<ul>
    <li>Voltar ao exemplo de <a href="https://github.com/tecnico-distsys/example_java-app" target="_blank">aplicação Java</a>:</li>
    <ul>
        <li>Configurar o projecto, seguindo as indicações no ficheiro <tt>README</tt></li>
        <li>Experimente executar através da linha de comando <tt>mvn</tt></li>
    </ul>
    <li>Experimente as funcionalidades de depuração (<i>debug</i>):</li>
    <ul>
        <li>Criar um ponto de paragem (<i>breakpoint</i>) no programa e fazer <i>debug</i></li>
        <li>Alterar os argumentos do programa (-Dexec.args="(...)" pode ser usado para especificar os argumentos do programa quando executado através do comando mvn) e inspecionar as variáveis durante a execução</li>
    </ul>
</ul>

<p>&nbsp;</p>
<hr />
<h2 id="sockets"><i>Sockets</i></h2>

<p>
Uma tomada (<i>socket</i>) é uma extremidade de uma ligação através de uma rede de computadores.
Atualmente, a comunicação entre computadores faz-se quase sempre com IP (<i>Internet Protocol</i>).
Os <i>sockets</i> mais comuns usam TCP (<i>Transmission Control Protocol</i>), que estabelece uma ligação entre cliente e servidor.
Um <i>socket</i> é identificado por um endereço IP e por um número de porto.
</p>
<p>
<img height="70" src="connection.png" />

<p>
O Java disponibiliza uma <a href="https://docs.oracle.com/javase/tutorial/networking/sockets/index.html" target="_blank">biblioteca de <i>sockets</i></a> que está disponível no pacote <tt>java.net</tt>.
</p>
<p>
Os <i>sockets</i> definem uma interface de programação, mas não definem o conteúdo e significado das mensagens que vão ser trocadas.
Para isso é necessário um protocolo de comunicação. 
Um protocolo é um sistema de regras que define uma convenção para permitir que diferentes entidades troquem informação de forma não ambígua.
Assim tem que ser na comunicação em <i>sockets</i>.
É preciso "dizer" como é enviado um pedido, quando termina o pedido, quando chega a resposta, quando já foi recebida, e assim por diante.
</p>
<p>
Um exemplo de protocolo é o HTTP (<i>HyperText Transfer Protocol</i>) que está na base da comunicação na <a href="www/index.html">WWW (<i>World Wide Web</i>)</a>.<br />
Pode consultar também a Secção 1.6 do livro da cadeira sobre a <i>World Wide Web</i> e <i>Sockets</i>.
</p>
<p>&nbsp;</p>

<hr />

<h2>Exercício a resolver até ao fim da aula</h2>

<p>
O ponto de partida para o exercício ilustra a comunicação entre dois programas Java usando a biblioteca de <i>sockets</i>:<br />
<a href="https://github.com/tecnico-distsys/exercise_java-sockets" target="_blank"><i>Java Sockets</i> <img src="../_img/github.png" alt="GitHub" height="16"></a>
</p>
    
<ol>
    <li>Obter o código: fazer <b><i>Clone or Download</b></i>.<br />
    Temos dois programas que colaboram entre si: servidor e cliente.</li>
    <ol type="a">
        <li>Estudar o código fonte e os ficheiros <tt>pom.xml</tt> do servidor e do cliente</li>
        <li>Configurar os dois projetos no Java IDE</li>
        <li>Compilar e executar primeiro o servidor e depois o cliente, seguindo as instruções no ficheiro <tt>README</tt></li>
    </ol>
</ol>

<p>
<b>Problemas?</b> Observar atentamente as <a href="./exceptions/index.html">exceções</a> produzidas.
</p>
<ol start="2">
    <li>
    Analisar o <i>output</i> do Maven, em especial as linhas começadas por <small>[WARNING]</small>:
    </li>
    <ol type="a">
        <li>Qual foi a causa da exceção?</li>
		<li>Que exceção foi lançada?</li>
		<li>Em que linha do código do cliente é que foi lançada a exceção?</li>
        <ul>
            <li>Será um problema na configuração dos argumentos?</li>
        </ul>
	</ol>
</ol>

<ol start="3">
    <li>Compilar e executar o servidor até funcionar sem erros.</li>
    <ul>
        <li>Em casos mais complicados, pode usar-se o depurador (<i>debugger</i>).</li>
    </ul>
</ol>


<p>
Problema resolvido?<br />
<a href="http://www.phdcomics.com/comics/archive.php?comicid=180">Sim</a> ou
<a href="https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Keep_Calm_and_Carry_On_Poster.svg/683px-Keep_Calm_and_Carry_On_Poster.svg.png">Não</a> :)<br />
<br />
Retomar o exercício:
</p>

<ol start="4">
    <li>
    <b>Modificar os programas para que o servidor responda ao cliente com uma mensagem de confirmação.</b>
    </li>
    <li>
    ... o resto do enunciado será entregue no início da aula de laboratório.
    </li>
</ol>

</div>

<p>&nbsp;</p>



<p>&nbsp;</p>

<hr />

<div class="rodape">
<p>
&copy; Docentes de Sistemas Distribu&iacute;dos,
<a href="http://www.dei.tecnico.ulisboa.pt/">Dep. Eng. Informática</a>,
<a href="http://www.ist.eu">Técnico Lisboa</a><br />
</p>
</div>

</body>
</html>
