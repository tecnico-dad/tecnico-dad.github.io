<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
        <link rel="stylesheet" type="text/css" href="../_css/labs-sd.css">
        <link href="../_prettify/prettify.css" type="text/css" rel="stylesheet" />
        <script type="text/javascript" src="../_prettify/prettify.js"></script>
        <title>Servidor de Nomes</title>
    </head>
    <body onload="prettyPrint()">
        <div class="contexto">
            <p>
                <a href="../index.html">Labs SD</a> &gt;
            </p>
        </div>
        <div class="titulo" id="1">
            <h1>Servidor de Nomes</h1>
        </div>
        <div class="objectivos">
            <h2>Objetivos</h2>
            <ul>
                <li>Criar um servidor de nomes</li>
                <li>Publicar e pesquisar serviços gRPC no servidor de nomes</li>
            </ul>
        </div>
        <div class="indice"></div>
        <div class="corpo">
<h2 id="introdução">Introdução</h2>
<p>Neste guião construiremos um servidor de nomes usando a tecnologia gRPC. 
	Este servidor permitirá que processos servidores registem o serviço remoto que oferecem.</br>
	Isso permitirá que os processos cliente possam descobrir, quais os endereços (nome DNS, porto) dos servidores que atualmente oferecem um dado serviço.<
	Pode haver mais que um servidor a oferecer o mesmo serviço remoto (por exemplo, num serviço replicado), sendo que cada servidor pode ser 
	distinguido por um qualificador (por exemplo, "primário" e "secundário").</p>
		
<h2 id="exercício">Exercício</h2>
<p>Este exercício assume como ponto de partida o código do projeto já desenvolvido até ao momento por cada grupo.</p>
<h3 id="implementação-da-operação-de-registo">Implementação da operação de registo</h3>
<ol type="1">
<li>Implemente a operação <code>register</code>, que permite a um servidor inserir uma entrada no servidor de nomes.<br />
<ul>
    <li>Comece por definir esta operação no ficheiro <code>.proto</code> adequado. </li>
    <li>Esta chamada remota recebe como
        parâmetros:</li>
    <ul>
        <li>um nome do serviço oferecido pelo servidor (uma string);</li>
	<li>um qualificador associado ao servidor a registar (uma string);</li>
        <li>o endereço do servidor, na forma <code>host:port</code> (uma string);</li>
        </ul>
    <li>E deve retornar: </li>
    <ul>
        <li>uma mensagem <code>OK</code> quando for possível registar o serviço;</li>
        <li>uma exceção com a descrição <code>Not possible to register the server</code> quando não for possível registar o serviço;</li>
    </ul>
    <li>Configure o código base para ter o servidor de nomes a aguardar ligações no porto definido no enunciado do projeto (neste caso, <code>5001</code>).
    </li>
    <li>Crie a classe <code>ServerEntry</code> que irá conter a informação para cada servidor, nomeadamente, a combinação
        <code>host:port</code> e o qualificador.
    </li>
    <li>Crie a classe <code>ServiceEntry</code> que irá guardar o nome de um serviço e um conjunto de
        <code>ServerEntry</code>s.
    </li>
    <li>Crie a classe <code>NamingServer</code> que irá guardar toda a informação que o servidor necessita, ou seja,
        contém um
        mapa que permite associar um nome de um serviço à <code>ServiceEntry</code> correspondente.</li>
    <li>Crie o serviço que <code>NamingServerServiceImpl</code> que estende a classe gerada pelo protobuf e implemente a
        operação <code>register</code>.</li>
    </li>
    </ul>

</ol>
<h3 id="implementação-da-operação-de-procura-de-servidores">Implementação da operação de procura de servidores</h3>
<ol start="2" type="1">
<li>Implemente a operação <code>lookup</code>, que permite a um cliente encontrar servidores, relativos a um serviço.
    <ul>
        <li>Comece por definir esta operação no ficheiro <code>.proto</code> adequado.</li>
        <li>Este procedimento remoto recebe como parâmetros:
            <ul>
                <li>o nome do serviço a que o cliente pretende aceder;</li>
                <li>um qualificador que se pretende que os servidores retornados tenham associado.</li>
                </ul>
        <li>E deve retornar:
            <ul>
                <li>uma lista de servidores para o qualificador e serviço pedidos;</li>
                <li>uma lista com todos os servidores do serviço caso não seja dado qualquer qualificador;</li>
                <li>uma lista vazia caso o qualificador e/ou o serviço não existam.</li>
            </ul>
        </li>
        </li>
        </ul>

</ol>
<h3 id="implementação-da-operação-de-remoção-de-servidores">Implementação da operação de remoção de servidores</h3>
<ol start="3" type="1">
<li>Implemente a operação <code>delete</code>, que permite a um servidor remover-se do registo de nomes.
    <ul>
        <li>Comece por definir esta operação no ficheiro <code>.proto</code> adequado, tal como foi feito anteriormente.
        </li>
        <li>Esta chamada recebe como parâmetros:
            <ul>
                <li>o nome do serviço;</li>
                <li>o <code>host:port</code> do servidor.</li>
            </ul>
            </li>
            <li>E deve retornar: </li>
            <ul>
                <li>uma mensagem <code>OK</code> quando for possível remover o servidor;</li>
                <li>uma exceção como a descrição <code>Not possible to remove the server</code> quando não for possível remover o servidor.</li>
            </ul>
            </ul>
            </li>
</ol>
	<p>&nbsp;</p>
	<hr />

	<div class="rodape">
		<p>
			&copy; Docentes de Sistemas Distribuídos,
			<a href="http://www.dei.tecnico.ulisboa.pt/">Dep. Eng. Informática</a>,
			<a href="http://www.ist.eu">Técnico Lisboa</a><br />
		</p>
	</div>
    </body>
</html>
